<!DOCTYPE html>
<html lang="en">
<head>
    <title>Compound interest calculator</title>
    <link rel="stylesheet" href="../style.css" />
</head>
<body onload="updateSliderToValuebox('principal_amount_slider', 'principal_amount_value'); updateSliderToValuebox('rate_of_interest_slider', 'rate_of_interest_value'); updateSliderToValuebox('time_period_slider', 'time_period_value'); calculateResult();">

    <h1>COMPOUND INTEREST CALCULATOR</h1>
    <a href="../" ><button>Back</button></a>
    <div class="container">
        <label for="PA" >Principal Amount</label>
        <input type="number" class="Value_container" oninput="updateValueboxToSlider('principal_amount_value', 'principal_amount_slider'); calculateResult()" id="principal_amount_value" style= "margin-right: 5px; text-align: left;" />      
        <input type="text"  class="Units" value="â‚¹" disabled/><br/><br/>
        <input type="range" min="1000" max="10000000" class="slider" id="principal_amount_slider" oninput="updateSliderToValuebox('principal_amount_slider', 'principal_amount_value'); calculateResult();" />
        <br/><br/>
        
        <label for="ri" >Rate of Interest</label>
        <input type="text"  class="Units" value="%" style= "margin-right: 5px;" disabled/>
        <input type="number" id="rate_of_interest_value" oninput="updateValueboxToSlider('rate_of_interest_value', 'rate_of_interest_slider'); calculateResult();" class="Value_container" /><br/><br/>
        <input type="range" min="1.00" max="50.0" id="rate_of_interest_slider" class="slider" step="0.1" oninput="updateSliderToValuebox('rate_of_interest_slider', 'rate_of_interest_value'); calculateResult();" />
        <br/><br/>
        
        <label for="TP">Time Period</label>
        <input type="text"  class="Units" value="Yr" style= "margin-right: 5px;" disabled />
        <input type="number" id="time_period_value" oninput="updateValueboxToSlider('time_period_value', 'time_period_slider'); calculateResult(); " class="Value_container" /><br/><br/>
        <input type="range" min="1" max="30" id="time_period_slider" class="slider" oninput="updateSliderToValuebox('time_period_slider', 'time_period_value'); calculateResult();" />
        <br/><br/> 

        <label for="compound_frequency">Compound frequency</label>
        <select id="compound_frequency" oninput="calculateResult()">
            <option>Yearly</option>
            <option>Half-Yearly</option>
            <option>Quarterly</option>
            <option>Monthly</option>
        </select><br/><br/><br/>

        <div>
            <label for="principal_amount_result">Principal Amount</label>
            <input type="text" class="result_container" id="principal_amount_result" disabled />
            <br/><br/>

            <label for="total_interest_result">Total Interest</label>
            <input type="text" class="result_container" id="total_interest_result" disabled />
            <br/><br/>

            <label for="total_amount_result">Total Amount</label>
            <input type="text" class="result_container" id="total_amount_result" disabled />
            <br/><br/>

        </div>

    </div>
    
    <script>
        var slider = document.getElementById('principal_amount_slider');
        slider.value = 100000;
        var slider = document.getElementById('rate_of_interest_slider');
        slider.value = 6.0;
        var slider = document.getElementById('time_period_slider');
        slider.value = 5;
        
        function getFrequency(){
            var frequency;
            compound_frequency= document.getElementById('compound_frequency');
            if(compound_frequency.value=='Half-Yearly') {
                frequency = 2;
            }
            else if(compound_frequency.value=='Quarterly') {
                frequency = 4;
            }
            else if(compound_frequency.value == 'Monthly') {
                frequency = 12;
            }
            else {
                frequency = 1;
            }
            return frequency;
        }
     
        function updateSliderToValuebox(slider, valuebox) {
            var slider = document.getElementById(slider);
            var valuebox = document.getElementById(valuebox);
            valuebox.value = slider.value;
        }
        
        function updateValueboxToSlider(valuebox, slider) {
            var valuebox = document.getElementById(valuebox);
            var slider = document.getElementById(slider);
            slider.value = valuebox.value;
        }

        function calculateResult() {
            var frequency = getFrequency();
            var principal_amount = document.getElementById('principal_amount_slider').value;
            var time_period = document.getElementById('time_period_slider').value;
            var rate_of_interest = document.getElementById('rate_of_interest_slider').value;
            var principal_amount_result = document.getElementById('principal_amount_result');
            var total_interest_result = document.getElementById('total_interest_result');
            var total_amount_result = document.getElementById('total_amount_result');

            let principal_amount_result_formatted = Number(principal_amount).toLocaleString("en-IN", {style:"currency", currency:"INR", minimumFractionDigits: 0});
            principal_amount_result.value = principal_amount_result_formatted;
            
            var total_amount_result_unformatted = principal_amount * ( (1 + (rate_of_interest / (100 * frequency) ) )**(frequency * time_period) );
            var total_amount_result_formatted = Number(parseInt(total_amount_result_unformatted) + 1).toLocaleString("en-IN", {style:"currency", currency:"INR", minimumFractionDigits: 0});
            total_amount_result.value = total_amount_result_formatted;
            
            var total_interest_result_formatted = Number(parseInt(total_amount_result_unformatted) + 1 - principal_amount).toLocaleString("en-IN", {style:"currency", currency:"INR", minimumFractionDigits: 0});
            total_interest_result.value = total_interest_result_formatted;
        }

    </script>
</body>
</html>