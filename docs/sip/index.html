<!DOCTYPE html>
<html lang="en">
<head>
    <title>SIP calculator</title>
    <link rel="stylesheet" href="../style.css" />
</head>
<body onload="updateSliderValue('monthly_investment_slider', 'monthly_investment_value'); updateSliderValue('expected_return_rate_slider', 'expected_return_rate_value'); updateSliderValue('time_period_slider', 'time_period_value'); calculateResult();">
    
    <h1>SYSTEMATIC INVESTMENT PLAN CALCULATOR</h1>
    <a href ="../"><button>BACK</button></a>
    <div class="container">
        <label for="monthly_investment" >Monthly Investment</label>
        <input type="number" class="Value_container" oninput="updateSliderValue('monthly_investment_value', 'monthly_investment_slider'); calculateResult()" id="monthly_investment_value" style= "margin-right: 5px; text-align: left;" />      
        <input type="text"  class="Units" value="â‚¹" disabled /><br/><br/>
        <input type="range" min="500" max="100000" class="slider" id="monthly_investment_slider" oninput="updateSliderValue('monthly_investment_slider', 'monthly_investment_value'); calculateResult();" />
        <br/><br/>
        
        <label for="expected_return_rate" >Expected return rate</label>
        <input type="text"  class="Units" value="%" style= "margin-right: 5px;" disabled />
        <input type="number" id="expected_return_rate_value" oninput="updateSliderValue('expected_return_rate_value', 'expected_return_rate_slider'); calculateResult();" class="Value_container" /><br/><br/>
        <input type="range" min="1.00" max="30.0" id="expected_return_rate_slider" class="slider" step="0.1" oninput="updateSliderValue('expected_return_rate_slider', 'expected_return_rate_value'); calculateResult();" />
        <br/><br/>
        
        <label for="time_period">Time Period</label>
        <input type="text"  class="Units" value="Yr" style= "margin-right: 5px;" disabled />
        <input type="number" id="time_period_value" oninput="updateSliderValue('time_period_value', 'time_period_slider'); calculateResult();" class="Value_container" /><br/><br/>
        <input type="range" min="1" max="40" id="time_period_slider" class="slider" oninput="updateSliderValue('time_period_slider', 'time_period_value'); calculateResult();" />
        <br/><br/> 

        <div>
            <label for="invested_amount">Invested Amount</label>
            <input type="text" class="result_container" id="invested_amount_result" disabled />
            <br/><br/>

            <label for="estimated_returns">Est. returns</label>
            <input type="text" class="result_container" id="esti_returns_result" disabled />
            <br/><br/>

            <label for="total_value">Total Value</label>
            <input type="text" class="result_container" id="total_value_result" disabled />
            <br/><br/>

        </div>

    </div>
    
    <script>
        var slider = document.getElementById('monthly_investment_slider');
        slider.value = 25000;
        var slider = document.getElementById('expected_return_rate_slider');
        slider.value = 12.0;
        var slider = document.getElementById('time_period_slider');
        slider.value = 10;
     
        function updateSliderValue(slider, valuebox) {
            //console.log(slider.textContent)
            var pa = document.getElementById(slider);
            var val = document.getElementById(valuebox);
            val.value = pa.value;
        }
        
        function calculateResult() {
            var monthly_investment = document.getElementById('monthly_investment_slider').value;
            var time = document.getElementById('time_period_slider').value;
            var rate = document.getElementById('expected_return_rate_slider').value;
            var invested_amount = document.getElementById('invested_amount_result');
            var returns = document.getElementById('esti_returns_result');
            var total = document.getElementById('total_value_result');

            var i = (rate/(100*12));
            let a = Number(monthly_investment*(12*time)).toLocaleString("en-IN", {style:"currency", currency:"INR", minimumFractionDigits: 0});
            invested_amount.value = a;
            var ans =  monthly_investment*((((1 + i) ** (time*12))- 1)/ i)*(1 + i);
            var ans1 = Number(parseInt(ans) + 1).toLocaleString("en-IN", {style:"currency", currency:"INR", minimumFractionDigits: 0});
            total.value = ans1;
            var b = Number(parseInt(ans) + 1 - (monthly_investment*12*time)).toLocaleString("en-IN", {style:"currency", currency:"INR", minimumFractionDigits: 0});
            returns.value = b;
        }
    </script>
</body> 
</html>
